<h1><%= t('.tasks_index') %></h1>

<% @tasks.each do |task| %>  
<% end %>

<%= form_with(model: :search, scope: :search, url: tasks_path, method: :get, local: true) do |form| %>
  

  <%= form.label :status,  t('.status') %>
  <%= form.select :status, Task.statuses.keys.unshift("")%>

  <%= form.label :title, t('.title') %>
  <%= form.text_field :title %>

  <%= form.label :label, t('.label') %>
  <%#= from.select :name, Label.statuses.keys.unshift("") %>


  <div class="actions">
    <%= form.submit t('.search') , id: "search_task" %>
  </div>
<% end %>


<table>
  <thead>
    <tr>
      <th><%= t('.title') %></th>
      <th><%= t('.content') %></th>
      <th><%= t('.create_at') %></th>
      <th><%=  link_to t('.deadline_on'), sort_deadline_on: true %></th>
      <th><%= link_to t('.priority'), sort_priority: true   %></th>
      <th><%= t('.status') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
      <tr>
        <td><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= task.created_at %></td>
        <td><%= task.deadline_on %></td>
        <td><%= task.priority %></td>
        <td><%= task.status %></td>
        <td><%= link_to t('.show'), task, class: "show-task" %></td>
        <td><%= link_to t('.edit'), edit_task_path(task), class: "edit-task"%></td>
        <td><%= link_to t('.destroy'), task, method: :delete, data: { confirm: t('common.confirm_destroy') }, class: "destroy-task" %></td>
      </tr>
    <% end %>
  </tbody> 
</table>
<%= paginate @tasks %>
<br>